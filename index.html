<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Awesome work from home status tool</title>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io();
            let token = '';

            function loginAlice() {
              socket.emit('login', { name: 'Alice' });
            }
            
            function loginBob() {
              socket.emit('login', { name: 'Bob' });
            }

            function createUser() {
              const userName = Math.random().toString(36);
              socket.emit('create_user', { name: userName });
              console.log('Trying to create user with name', userName);
            }

            function setWorking() {
              socket.emit('set_status', { new_status: 'working', token: token });
            }

            function setSleeping() {
              socket.emit('set_status', { new_status: 'sleeping', token: token });
            }

            socket.on('state', (data) => {
              console.log(data);
            });

            socket.on('login_result', (data) => {
              console.log('login result: ', data);
              token = data.token;
            });
            
            socket.on('create_result', (data) => {
              console.log('user creation result: ', data);
            });
        </script>
    </head>

    <body>
        <h1>Hello, world!</h1
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <button onclick='loginAlice()'> Login Alice </button>
        <button onclick='loginBob()'> Login Bob </button>
        <button onclick='setWorking()'> I am working </button>
        <button onclick='setSleeping()'> I am sleeping </button>
        <button onclick='createUser()'> Create random user </button>
    </body>

</html>
